(()=>{var e={};e.id=9,e.ids=[9],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},8095:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>o});var s=t(482),a=t(9108),l=t(2563),i=t.n(l),n=t(8300),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(r,d);let o=["",{children:["file-upload-demo",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1644)),"C:\\Users\\Trinity\\Pan-Afri\\src\\app\\file-upload-demo\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9234)),"C:\\Users\\Trinity\\Pan-Afri\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Trinity\\Pan-Afri\\src\\app\\file-upload-demo\\page.tsx"],u="/file-upload-demo/page",x={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/file-upload-demo/page",pathname:"/file-upload-demo",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9301:(e,r,t)=>{Promise.resolve().then(t.bind(t,6434))},6434:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>m});var s=t(2295),a=t(3729),l=t(9932),i=t(9224);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,i.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var d=t(6138);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,i.Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),c=(0,i.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),u=(0,i.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var x=t(4205);let p=({files:e,onFileDeleted:r,allowDelete:t=!0,allowDownload:l=!0,className:i=""})=>{let[p,m]=(0,a.useState)([]),[h,g]=(0,a.useState)(null),f=(e,r)=>p.some(t=>t.type===e&&t.fileId===r&&t.loading),y=(e,r,t)=>{m(s=>{let a=s.filter(t=>!(t.type===e&&t.fileId===r));return t?[...a,{type:e,fileId:r,loading:t}]:a})},b=async e=>{if(l){y("download",e.fileId,!0),g(null);try{let r=await (0,x.km)(e.fileId),t=document.createElement("a");t.href=r.data.downloadUrl,t.download=e.originalName,document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){g(e.response?.data?.message||e.message||"Download failed")}finally{y("download",e.fileId,!1)}}},j=async e=>{if(t&&window.confirm(`Are you sure you want to delete "${e.originalName}"? This action cannot be undone.`)){y("delete",e.fileId,!0),g(null);try{await (0,x._I)(e.fileId),r?.(e.fileId)}catch(e){g(e.response?.data?.message||e.message||"Delete failed")}finally{y("delete",e.fileId,!1)}}},v=async e=>{y("info",e.fileId,!0),g(null);try{let r=(await (0,x.hr)(e.fileId)).data;alert(`File Information:
      
Name: ${e.originalName}
Size: ${(0,x.sS)(r.size)}
Format: ${r.format.toUpperCase()}
Created: ${new Date(r.createdAt).toLocaleString()}
Type: ${r.resourceType}`)}catch(e){g(e.response?.data?.message||e.message||"Failed to get file info")}finally{y("info",e.fileId,!1)}};return 0===e.length?(0,s.jsxs)("div",{className:`text-center py-8 text-gray-500 ${i}`,children:[s.jsx(n,{className:"mx-auto h-12 w-12 text-gray-300 mb-4"}),s.jsx("p",{children:"No files uploaded yet"})]}):(0,s.jsxs)("div",{className:`space-y-4 ${i}`,children:[h&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(d.Z,{className:"h-5 w-5 text-red-600 mr-2"}),s.jsx("p",{className:"text-sm text-red-800",children:h})]})}),e.map(e=>s.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 truncate",children:e.originalName}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,x.sS)(e.size)," • ",e.format.toUpperCase()]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[s.jsx("button",{onClick:()=>v(e),disabled:f("info",e.fileId),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors disabled:opacity-50",title:"View file information",children:f("info",e.fileId)?s.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-gray-300 border-t-gray-600 rounded-full"}):s.jsx(o,{className:"h-4 w-4"})}),l&&s.jsx("button",{onClick:()=>b(e),disabled:f("download",e.fileId),className:"p-2 text-green-600 hover:text-green-800 hover:bg-green-100 rounded-md transition-colors disabled:opacity-50",title:"Download file",children:f("download",e.fileId)?s.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-green-300 border-t-green-600 rounded-full"}):s.jsx(c,{className:"h-4 w-4"})}),t&&s.jsx("button",{onClick:()=>j(e),disabled:f("delete",e.fileId),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded-md transition-colors disabled:opacity-50",title:"Delete file",children:f("delete",e.fileId)?s.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-red-300 border-t-red-600 rounded-full"}):s.jsx(u,{className:"h-4 w-4"})})]})]})},e.fileId))]})};function m(){let[e,r]=(0,a.useState)([]);return s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"File Upload System Demo"}),s.jsx("p",{className:"text-gray-600",children:"Test the manuscript upload functionality for the Africa Journal platform."})]}),(0,s.jsxs)("div",{className:"mb-12",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Upload Manuscript"}),s.jsx(l.p,{onUploadSuccess:e=>{r(r=>[...r,e])},onUploadError:e=>{console.error("Upload error:",e)},className:"max-w-2xl"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Uploaded Files (",e.length,")"]}),s.jsx(p,{files:e,onFileDeleted:e=>{r(r=>r.filter(r=>r.fileId!==e))},allowDelete:!0,allowDownload:!0})]}),(0,s.jsxs)("div",{className:"mt-12 p-6 bg-gray-50 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Testing Instructions"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-gray-600",children:[s.jsx("li",{children:"• Only PDF files are accepted (max 10MB)"}),s.jsx("li",{children:"• Files are uploaded to Cloudinary cloud storage"}),s.jsx("li",{children:"• Progress indicators show upload status"}),s.jsx("li",{children:"• Uploaded files can be downloaded securely"}),s.jsx("li",{children:"• Files can be deleted from cloud storage"}),s.jsx("li",{children:"• All operations require authentication"})]})]})]})})})}},9932:(e,r,t)=>{"use strict";t.d(r,{p:()=>u});var s=t(2295),a=t(3729),l=t(3380),i=t(6515),n=t(4513),d=t(6138),o=t(7060),c=t(4205);let u=({onUploadSuccess:e,onUploadError:r,disabled:t=!1,className:u=""})=>{let[x,p]=(0,a.useState)({file:null,uploading:!1,progress:null,result:null,error:null}),m=(0,a.useRef)(null),h=e=>{let r=e.target.files?.[0];if(!r)return;p(e=>({...e,file:r,error:null,result:null,progress:null}));let t=(0,c.D0)(r);if(!t.isValid){p(e=>({...e,error:t.error||"Invalid file"}));return}},g=async()=>{if(x.file){p(e=>({...e,uploading:!0,error:null}));try{let r=await (0,c.Di)(x.file,e=>{p(r=>({...r,progress:e}))});p(e=>({...e,uploading:!1,result:r.data,progress:null})),e?.(r.data)}catch(t){let e=t.response?.data?.message||t.message||"Upload failed";p(r=>({...r,uploading:!1,error:e,progress:null})),r?.(e)}}},f=()=>{p({file:null,uploading:!1,progress:null,result:null,error:null}),m.current&&(m.current.value="")};return(0,s.jsxs)("div",{className:`w-full ${u}`,children:[!x.file&&!x.result&&(0,s.jsxs)("div",{className:`
            border-2 border-dashed border-gray-300 rounded-lg p-8 text-center
            hover:border-gray-400 transition-colors cursor-pointer
            ${t?"opacity-50 cursor-not-allowed":""}
          `,onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation();let r=e.dataTransfer.files;if(r.length>0){let e=r[0],t={0:e,length:1,item:r=>0===r?e:null,[Symbol.iterator]:function*(){yield e}};h({target:{files:t},currentTarget:{files:t}})}},onClick:()=>!t&&m.current?.click(),children:[s.jsx(l.Z,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Manuscript"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Drag and drop your PDF file here, or click to browse"}),s.jsx("p",{className:"text-xs text-gray-500",children:"PDF files only, maximum 10MB"}),s.jsx("input",{ref:m,type:"file",accept:".pdf,application/pdf",onChange:h,className:"hidden",disabled:t})]}),x.file&&!x.result&&(0,s.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx(i.Z,{className:"h-8 w-8 text-red-600"}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:x.file.name}),s.jsx("p",{className:"text-sm text-gray-600",children:(0,c.sS)(x.file.size)})]})]}),!x.uploading&&s.jsx("button",{onClick:f,className:"text-gray-400 hover:text-gray-600",children:s.jsx(n.Z,{className:"h-5 w-5"})})]}),x.uploading&&x.progress&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[s.jsx("span",{children:"Uploading..."}),(0,s.jsxs)("span",{children:[x.progress.percentage,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${x.progress.percentage}%`}})})]}),x.error&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(d.Z,{className:"h-5 w-5 text-red-600 mr-2"}),s.jsx("p",{className:"text-sm text-red-800",children:x.error})]})}),!x.uploading&&!x.error&&s.jsx("button",{onClick:g,disabled:t,className:`
                w-full py-2 px-4 rounded-md font-medium transition-colors
                ${t?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}
              `,children:"Upload File"}),x.error&&s.jsx("button",{onClick:g,disabled:t,className:`
                w-full py-2 px-4 rounded-md font-medium transition-colors
                ${t?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"}
              `,children:"Retry Upload"})]}),x.result&&s.jsx("div",{className:"border border-green-300 bg-green-50 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx(o.Z,{className:"h-8 w-8 text-green-600"}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-green-900",children:"Upload Successful"}),(0,s.jsxs)("p",{className:"text-sm text-green-700",children:[x.result.originalName," (",(0,c.sS)(x.result.size),")"]})]}),s.jsx("button",{onClick:f,className:"text-green-600 hover:text-green-800",children:s.jsx(n.Z,{className:"h-5 w-5"})})]})})]})}},4205:(e,r,t)=>{"use strict";t.d(r,{D0:()=>c,Di:()=>i,_I:()=>o,hr:()=>d,km:()=>n,sS:()=>u});var s=t(7665),a=t(5750);let l=s.Z.create({baseURL:"http://localhost:5000/api/files"});l.interceptors.request.use(e=>{let r=(0,a.LP)();return r&&(e.headers.Authorization=`Bearer ${r}`),e});let i=async(e,r)=>{let t=new FormData;return t.append("manuscript",e),(await l.post("/upload/manuscript",t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{r&&e.total&&r({loaded:e.loaded,total:e.total,percentage:Math.round(100*e.loaded/e.total)})}})).data},n=async(e,r)=>{let t=r?{expiresIn:r.toString()}:{};return(await l.get(`/${e}/download`,{params:t})).data},d=async e=>(await l.get(`/${e}/info`)).data,o=async e=>(await l.delete(`/${e}`)).data,c=e=>"application/pdf"!==e.type?{isValid:!1,error:"Only PDF files are allowed"}:e.size>10485760?{isValid:!1,error:"File size must be less than 10MB"}:{isValid:!0},u=e=>{if(0===e)return"0 Bytes";let r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(2))+" "+["Bytes","KB","MB","GB"][r]}},1644:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>l,__esModule:()=>a,default:()=>i});let s=(0,t(6843).createProxy)(String.raw`C:\Users\Trinity\Pan-Afri\src\app\file-upload-demo\page.tsx`),{__esModule:a,$$typeof:l}=s,i=s.default}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[891,622,344],()=>t(8095));module.exports=s})();